<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>riveted.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Riveted</span> <span class="project-version">0.2.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 current"><a href="riveted.core.html"><div class="inner"><span>riveted.core</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="riveted.core.html#var-at"><div class="inner"><span>at</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-attr"><div class="inner"><span>attr</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-attr.3F"><div class="inner"><span>attr?</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-attribute.3F"><div class="inner"><span>attribute?</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-children"><div class="inner"><span>children</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-document.3F"><div class="inner"><span>document?</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-element.3F"><div class="inner"><span>element?</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-first-child"><div class="inner"><span>first-child</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-first-child.21"><div class="inner"><span>first-child!</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-fragment"><div class="inner"><span>fragment</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-last-child"><div class="inner"><span>last-child</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-last-child.21"><div class="inner"><span>last-child!</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-Navigable"><div class="inner"><span>Navigable</span></div></a></li><li class="depth-2"><a href="riveted.core.html#var-navigator"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>navigator</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-next-sibling"><div class="inner"><span>next-sibling</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-next-sibling.21"><div class="inner"><span>next-sibling!</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-next-siblings"><div class="inner"><span>next-siblings</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-parent"><div class="inner"><span>parent</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-parent.21"><div class="inner"><span>parent!</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-previous-sibling"><div class="inner"><span>previous-sibling</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-previous-sibling.21"><div class="inner"><span>previous-sibling!</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-previous-siblings"><div class="inner"><span>previous-siblings</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-root"><div class="inner"><span>root</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-root.21"><div class="inner"><span>root!</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-search"><div class="inner"><span>search</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-select"><div class="inner"><span>select</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-siblings"><div class="inner"><span>siblings</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-tag"><div class="inner"><span>tag</span></div></a></li><li class="depth-1"><a href="riveted.core.html#var-text"><div class="inner"><span>text</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">riveted.core</h1><div class="doc"><pre class="plaintext">A Clojure library for the fast processing of XML with VTD-XML.
</pre></div><div class="public anchor" id="var-at"><h3>at</h3><div class="usage"><code>(at navigator xpath)</code><code>(at navigator xpath prefix url)</code></div><div class="doc"><pre class="plaintext">Search for the given XPath in the navigator, returning the first matching
navigator. If used with a namespace aware navigator, also takes a namespace
prefix and URL for use in the XPath.

Examples:

  ; Returns a single navigator for the first matching element.
  (at nav "/article/title")

  ; Returns a single navigator for the first matching element providing
  ; ns-nav is namespace aware.
  (at ns-nav "//ns1:title" "ns1" "<a href="http://example.com/ns&quot;)">http://example.com/ns")</a></pre></div></div><div class="public anchor" id="var-attr"><h3>attr</h3><div class="usage"><code>(attr navigator attr-name)</code></div><div class="doc"><pre class="plaintext">Return the value of the named attribute for the given navigator.
Attributes can be specified with either a keyword or string name.

Examples:

  (attr (root nav) :lang)
  ;=&gt; "en"</pre></div></div><div class="public anchor" id="var-attr.3F"><h3>attr?</h3><div class="usage"><code>(attr? navigator attr-name)</code></div><div class="doc"><pre class="plaintext">Test whether the given attribute exists on the current element.
Attributes can be specified with either a keyword or string name.

Examples:

  (attr? (root nav) :lang)
  ;=&gt; true</pre></div></div><div class="public anchor" id="var-attribute.3F"><h3>attribute?</h3><div class="usage"><code>(attribute? navigator)</code></div><div class="doc"><pre class="plaintext">Tests whether the given navigator is currently positioned on an attribute.
</pre></div></div><div class="public anchor" id="var-children"><h3>children</h3><div class="usage"><code>(children navigator)</code><code>(children navigator element)</code></div><div class="doc"><pre class="plaintext">Return a lazy sequence of navigators for all child nodes of the given
navigator (optionally restricted by a given element type).

Examples:

  ; Return navigators for all children of nav.
  (children nav)

  ; Return navigators for all child p elements of nav.
  (children nav :p)</pre></div></div><div class="public anchor" id="var-document.3F"><h3>document?</h3><div class="usage"><code>(document? navigator)</code></div><div class="doc"><pre class="plaintext">Tests whether the given navigator is currently positioned the document.
</pre></div></div><div class="public anchor" id="var-element.3F"><h3>element?</h3><div class="usage"><code>(element? navigator)</code></div><div class="doc"><pre class="plaintext">Tests whether the given navigator is currently positioned on an element.
</pre></div></div><div class="public anchor" id="var-first-child"><h3>first-child</h3><div class="usage"><code>(first-child navigator)</code><code>(first-child navigator element)</code></div><div class="doc"><pre class="plaintext">Return a new navigator pointing to the current element's first child element
(restricted by an optional element type).

Examples:

  ; Return a new navigator pointing to the first child element of nav.
  (first-child nav)

  ; Return a new navigator pointing to the first child b element of nav.
  (first-child nav :b)</pre></div></div><div class="public anchor" id="var-first-child.21"><h3>first-child!</h3><div class="usage"><code>(first-child! navigator)</code><code>(first-child! navigator element)</code></div><div class="doc"><pre class="plaintext">Move the given navigator to the current element's first child element
(restricted by an optional element type), mutating it in place.

Examples:

  ; Move nav to the first child element.
  (first-child! nav)

  ; Move nav to the first child b element.
  (first-child! nav :b)</pre></div></div><div class="public anchor" id="var-fragment"><h3>fragment</h3><div class="usage"><code>(fragment navigator)</code></div><div class="doc"><pre class="plaintext">Return a string XML fragment for all nodes under the given navigator.

Examples:

  (fragment nav)
  ;=&gt; "&lt;b&gt;Some&lt;/b&gt; XML as a raw &lt;i&gt;string&lt;/i&gt;"</pre></div></div><div class="public anchor" id="var-last-child"><h3>last-child</h3><div class="usage"><code>(last-child navigator)</code><code>(last-child navigator element)</code></div><div class="doc"><pre class="plaintext">Return a new navigator pointing to the current element's last child element
(restricted by an optional element type).

Examples:

  ; Return a new navigator pointing to the last child element of nav.
  (last-child nav)

  ; Return a new navigator pointing to the last child b element of nav.
  (last-child nav :b)</pre></div></div><div class="public anchor" id="var-last-child.21"><h3>last-child!</h3><div class="usage"><code>(last-child! navigator)</code><code>(last-child! navigator element)</code></div><div class="doc"><pre class="plaintext">Move the given navigator to the current element's last child element
(restricted by an optional element type), mutating it in place.

Examples:

  ; Move nav to the last child element.
  (last-child! nav)

  ; Move nav to the last child b element.
  (last-child! nav :b)</pre></div></div><div class="public anchor" id="var-Navigable"><h3>Navigable</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Protocol for types that can be used to generate a VTD navigator.
</pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-navigator"><h3>navigator</h3><div class="usage"><code>(navigator xml)</code><code>(navigator xml namespace-aware)</code></div><div class="doc"><pre class="plaintext">Return a VTD navigator for a given byte array or UTF-8 string of XML with
optional namespace support. If called with only a byte array or string,
namespace support is disabled.

Examples:

  ; Return a navigator for the given byte array with no namespace support.
  (navigator my-byte-array)

  ; Return a navigator for the given UTF-8 string with no namespace support.
  (navigator "&lt;root&gt;&lt;foo&gt;Bar&lt;/foo&gt;&lt;/root&gt;")

  ; Return a navigator for the given UTF-8 string with namespace support.
  (navigator "&lt;root xmlns:ns=\"<a href="http://example.com/ns">http://example.com/ns</a>\"&gt;&lt;foo&gt;Bar&lt;/foo&gt;&lt;/root&gt;" true)</pre></div></div></div></div></div><div class="public anchor" id="var-next-sibling"><h3>next-sibling</h3><div class="usage"><code>(next-sibling navigator)</code><code>(next-sibling navigator element)</code></div><div class="doc"><pre class="plaintext">Return a new navigator pointing to the current element's next sibling element
(restricted by an optional element type).

Examples:

  ; Return a new navigator pointing to the next sibling element of nav.
  (next-sibling nav)

  ; Return a new navigator pointing to the next sibling b element of nav.
  (next-sibling nav :b)</pre></div></div><div class="public anchor" id="var-next-sibling.21"><h3>next-sibling!</h3><div class="usage"><code>(next-sibling! navigator)</code><code>(next-sibling! navigator element)</code></div><div class="doc"><pre class="plaintext">Move the given navigator to the current element's next sibling element
(restricted by an optional element type), mutating it in place.

Examples:

  ; Move nav to the next sibling element.
  (next-sibling! nav)

  ; Move nav to the next sibling b element.
  (next-sibling! nav :b)</pre></div></div><div class="public anchor" id="var-next-siblings"><h3>next-siblings</h3><div class="usage"><code>(next-siblings navigator)</code><code>(next-siblings navigator element)</code></div><div class="doc"><pre class="plaintext">Return a lazy sequence of navigators representing all siblings next to the
given navigator (optionally restricted by a given element type).

Examples:

  ; Return navigators for every next sibling element to nav.
  (next-siblings nav)

  ; Return navigators for every next sibling p element to nav.
  (next-siblings nav :p)</pre></div></div><div class="public anchor" id="var-parent"><h3>parent</h3><div class="usage"><code>(parent navigator)</code></div><div class="doc"><pre class="plaintext">Return a new navigator pointing to the parent element of the given
navigator.</pre></div></div><div class="public anchor" id="var-parent.21"><h3>parent!</h3><div class="usage"><code>(parent! navigator)</code></div><div class="doc"><pre class="plaintext">Move the given navigator to the current element's parent element, mutating
it in place.</pre></div></div><div class="public anchor" id="var-previous-sibling"><h3>previous-sibling</h3><div class="usage"><code>(previous-sibling navigator)</code><code>(previous-sibling navigator element)</code></div><div class="doc"><pre class="plaintext">Return a new navigator pointing to the current element's previous sibling
element (restricted by an optional element type).

Examples:

  ; Return a new navigator pointing to the previous sibling element of nav.
  (previous-sibling nav)

  ; Return a new navigator pointing to the previous sibling b element of nav.
  (previous-sibling nav :b)</pre></div></div><div class="public anchor" id="var-previous-sibling.21"><h3>previous-sibling!</h3><div class="usage"><code>(previous-sibling! navigator)</code><code>(previous-sibling! navigator element)</code></div><div class="doc"><pre class="plaintext">Move the given navigator to the current element's previous sibling element
(restricted by an optional element type), mutating it in place.

Examples:

  ; Move nav to the previous sibling element.
  (previous-sibling! nav)

  ; Move nav to the previous sibling b element.
  (previous-sibling! nav :b)</pre></div></div><div class="public anchor" id="var-previous-siblings"><h3>previous-siblings</h3><div class="usage"><code>(previous-siblings navigator)</code><code>(previous-siblings navigator element)</code></div><div class="doc"><pre class="plaintext">Return a lazy sequence of navigators representing all siblings previous to
the given navigator (optionally restricted by a given element type).

Note that this is lazily evaluated right-to-left so the final sequence will
be in reverse order to the actual nodes in the document.

Examples:

  ; Return navigators for every previous sibling element to nav.
  (previous-siblings nav)

  ; Return navigators for every previous sibling p element to nav.
  (previous-siblings nav :p)</pre></div></div><div class="public anchor" id="var-root"><h3>root</h3><div class="usage"><code>(root navigator)</code></div><div class="doc"><pre class="plaintext">Return a new navigator pointing to the document root.
</pre></div></div><div class="public anchor" id="var-root.21"><h3>root!</h3><div class="usage"><code>(root! navigator)</code></div><div class="doc"><pre class="plaintext">Move the given navigator to the document root, mutating it in place.
</pre></div></div><div class="public anchor" id="var-search"><h3>search</h3><div class="usage"><code>(search navigator xpath)</code><code>(search navigator xpath prefix url)</code></div><div class="doc"><pre class="plaintext">Search for the given XPath in the navigator, returning a lazy sequence of all
matching navigators. If used with a namespace aware navigator, also takes
a namespace prefix and URL for use in the XPath.

Examples:

  ; Returns navigators for all matching elements.
  (search nav "/article/title")

  ; Returns navigators for all matching elements providing ns-nav is
  ; namespace aware.
  (search ns-nav "//ns1:title" "ns1" "<a href="http://example.com/ns&quot;)">http://example.com/ns")</a></pre></div></div><div class="public anchor" id="var-select"><h3>select</h3><div class="usage"><code>(select navigator element)</code></div><div class="doc"><pre class="plaintext">Return a lazy sequence of navigators matching the given element name, * can
be used to match all elements.

Examples:

  ; Returns navigators for each element in nav.
  (select nav "*")

  ; Returns navigators for all b elements in nav.
  (select nav "b")</pre></div></div><div class="public anchor" id="var-siblings"><h3>siblings</h3><div class="usage"><code>(siblings navigator)</code><code>(siblings navigator element)</code></div><div class="doc"><pre class="plaintext">Return navigators for all siblings to the given navigator (optionally
restricted by a given element type).

Note that this is not lazy in order to preserve the correct order of nodes
and previous siblings need to be fully realised for sorting.

Examples:

  ; Return navigators for all siblings to nav.
  (siblings nav)

  ; Return navigators for all sibling p elements to nav.
  (siblings nav :p)</pre></div></div><div class="public anchor" id="var-tag"><h3>tag</h3><div class="usage"><code>(tag navigator)</code></div><div class="doc"><pre class="plaintext">Return the tag name for the element under the given VTD navigator as a
string. If positioned on an attribute (e.g. with an XPath like /@foo), return
the name of the attribute.

Examples:

  (tag (root nav))
  ;=&gt; "root"

  (tag (at nav "/channel/@id"))
  ;=&gt; "id"</pre></div></div><div class="public anchor" id="var-text"><h3>text</h3><div class="usage"><code>(text navigator)</code></div><div class="doc"><pre class="plaintext">Return all descendant text content below the given navigator as one string.
This means both the value of a simple text node and also the resulting text
value of a mixed content node such as &lt;p&gt;&lt;b&gt;Foo&lt;/b&gt; bar&lt;/p&gt;. If the navigator
is currently positioned on an attribute (e.g. by using an XPath like /@foo),
return the value of the attribute.

Examples:

  ; Returns "Foo" given nav points to &lt;p&gt;Foo&lt;/p&gt;
  (text nav)

  ; Returns "Foo bar" given nav points to &lt;p&gt;&lt;b&gt;Foo&lt;/b&gt; bar&lt;/p&gt;
  (text nav)

  ; Returns "123" given nav points to @src of &lt;img src="123"/&gt;
  (text nav)</pre></div></div></div></body></html>